<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Admin Rally - Controle Total</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css"/>
    <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />
    <style>
        html, body { height: 100%; margin: 0; padding: 0; overflow: hidden; display: flex; flex-direction: column; font-family: 'Segoe UI', sans-serif; }
        #map { flex-grow: 1; width: 100%; background: #e5e3df; }
        .panel { padding: 15px; background: #1a1a1a; color: white; display: flex; gap: 10px; align-items: center; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.5); }
        .results-area { height: 200px; overflow-y: auto; background: #fff; padding: 15px; font-family: monospace; font-size: 13px; border-top: 4px solid #ffc107; color: #333; }
        button { padding: 10px 18px; cursor: pointer; border-radius: 6px; border: none; font-weight: bold; transition: 0.2s; }
        .btn-save { background: #28a745; color: white; }
        .btn-calc { background: #dc3545; color: white; }
        .car-block { margin-bottom: 8px; border-bottom: 1px solid #eee; padding-bottom: 5px; }
        .penalty { color: #d32f2f; font-weight: bold; margin-left: 5px; }
        .success { color: #388e3c; font-weight: bold; }
    </style>
</head>
<body>

<div class="panel">
    <strong style="color: #ffc107;">RALLY ADMIN v2.0</strong>
    <button class="btn-save" onclick="saveConfig()">1. Salvar Mapa</button>
    <button class="btn-calc" onclick="processRankings()">2. Processar Apuração</button>
    <span id="status" style="margin-left: auto; color: #00ff00; font-size: 14px;">● Sistema Pronto</span>
</div>

<div id="map"></div>
<div id="results" class="results-area">
