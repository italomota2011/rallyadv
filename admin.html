<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Admin - Controle Rally</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-draw@1.0.4/dist/leaflet.draw.css" />
    <style>
        body { margin: 0; font-family: sans-serif; }
        #map { height: 85vh; width: 100%; }
        .controles { padding: 10px; background: #222; display: flex; gap: 8px; flex-wrap: wrap; color: white; }
        button { padding: 8px 12px; cursor: pointer; border: none; border-radius: 4px; font-weight: bold; }
        .btn-save { background: #2ecc71; color: white; }
        .btn-calc { background: #3498db; color: white; }
        .btn-reset { background: #e74c3c; color: white; }
        .marker-id { background: #f1c40f; color: black; border: 2px solid black; border-radius: 50%; 
                     display: flex; align-items: center; justify-content: center; font-weight: bold; width: 30px; height: 30px; }
    </style>
</head>
<body>
    <div class="controles">
        <button onclick="mudarMapa()">Alternar Satélite</button>
        <button class="btn-save" onclick="salvarConfig()">1. Salvar Percurso</button>
        <button class="btn-calc" onclick="processarApuracao()">2. Rodar Apuração</button>
        <button onclick="window.location.href='resultados.html'">Ver Resultados</button>
        <button class="btn-reset" onclick="reiniciarProva()">Reiniciar Sistema</button>
        <input type="text" id="buscaCidade" placeholder="Cidade...">
    </div>
    <div id="map"></div>

    <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
    <script
