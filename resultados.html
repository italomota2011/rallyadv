<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Ranking Oficial</title>
    <style>
        body { font-family: sans-serif; background: #f4f4f4; padding: 20px; }
        .card { background: white; padding: 20px; margin-bottom: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #ddd; }
        th { background: #333; color: white; }
        tr:nth-child(even) { background: #fafafa; }
        .posicao { font-weight: bold; color: #e67e22; }
    </style>
</head>
<body>
    <h1>Ranking de Competição</h1>
    <div id="container"></div>

    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>
    <script>
        // Configuração Firebase idêntica...
        const firebaseConfig = { /* ... */ };
        firebase.initializeApp(firebaseConfig);
        
        firebase.database().ref('competidores').on('value', snap => {
            const data = snap.val();
            let categorias = {};
            
            for(let id in data) {
                let c = data[id];
                c.carro = id;
                if(!categorias[c.categoria]) categorias[c.categoria] = [];
                categorias[c.categoria].push(c);
            }

            let html = "";
            for(let cat in categorias) {
                categorias[cat].sort((a,b) => b.pontos - a.pontos);
                html += `<div class="card"><h2>${cat}</h2><table>
                    <tr><th>Pos</th><th>Carro</th><th>Piloto</th><th>Pontos</th></tr>`;
                
                categorias[cat].forEach((p, i) => {
                    html += `<tr>
                        <td class="posicao">${i+1}º</td>
                        <td>#${p.carro}</td>
                        <td>${p.nome}</td>
                        <td>${p.pontos.toLocaleString()}</td>
                    </tr>`;
                });
                html += `</table></div>`;
            }
            document.getElementById('container').innerHTML = html;
        });
    </script>
</body>
</html>
