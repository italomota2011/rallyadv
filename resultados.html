<!DOCTYPE html>
<html>
<head>
    <title>Ranking Oficial</title>
    <style>
        table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #333; color: white; }
    </style>
</head>
<body>
    <h1>Ranking Rally</h1>
    <h2>Categoria 4x4</h2>
    <table id="table4x4">
        <thead><tr><th>Pos</th><th>Carro</th><th>Piloto</th><th>Pontos</th></tr></thead>
        <tbody></tbody>
    </table>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = { /* SEU CONFIG AQUI */ };
        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        onValue(ref(db, 'competidores'), (snapshot) => {
            const lista = [];
            snapshot.forEach(child => { lista.push({id: child.key, ...child.val()}); });
            
            // Ordenar por pontos (Maior para menor)
            lista.sort((a, b) => b.pontos - a.pontos);

            const tbody = document.querySelector("#table4x4 tbody");
            tbody.innerHTML = "";
            lista.forEach((c, index) => {
                tbody.innerHTML += `<tr><td>${index+1}ยบ</td><td>${c.id}</td><td>${c.nome}</td><td>${c.pontos}</td></tr>`;
            });
        });
    </script>
</body>
</html>
